worker_processes 1;
error_log logs/error.log debug;

events {
    worker_connections 1024;
}

http {
    # Load the VTS module (this would be done through load_module in real nginx)
    
    # VTS Zone configuration - defines shared memory for statistics
    vts_zone main 10m;
    
    # Enable upstream statistics
    vts_upstream_stats on;

    server {
        listen 80;
        server_name localhost;

        # VTS status location
        location /status {
            vts_status;
        }

        location / {
            return 200 "VTS Test Server";
            add_header Content-Type text/plain;
        }
    }
    
    # Example upstream configuration
    upstream backend {
        vts_upstream_zone backend_zone;
        server 127.0.0.1:8001;
        server 127.0.0.1:8002;
    }

    server {
        listen 8080;
        server_name upstream_test;
        
        location / {
            proxy_pass http://backend;
        }
    }
}